= bootstrap_form_for @application_setting, url: admin_application_settings_path, layout: :horizontal, html: { class: 'fieldset-form' } do |f|
  = f.alert_message 'Please check your form for possible errors.'

  %fieldset
    %legend Visibility and Access Controls
    = f.select :default_branch_protection, options_for_select(Gitlab::Access.protection_options, @application_setting.default_branch_protection)
    .form-group.project-visibility-level-holder
      = f.label :default_project_visibility, class: 'control-label col-sm-2'
      .col-sm-10
        = render('shared/visibility_radios', model_method: :default_project_visibility, form: f, selected_level: @application_setting.default_project_visibility, form_model: 'Project')
    .form-group.project-visibility-level-holder
      = f.label :default_snippet_visibility, class: 'control-label col-sm-2'
      .col-sm-10
        = render('shared/visibility_radios', model_method: :default_snippet_visibility, form: f, selected_level: @application_setting.default_snippet_visibility, form_model: 'Snippet')
    .form-group
      = f.label :restricted_visibility_levels, class: 'control-label col-sm-2'
      .col-sm-10
        - data_attrs = { toggle: 'buttons' }
        .btn-group{ data: data_attrs }
          - restricted_level_checkboxes('restricted-visibility-help').each do |level|
            = level
        %span.help-block#restricted-visibility-help Selected levels cannot be used by non-admin users for projects or snippets
    = f.form_group :version_check_enabled do
      = f.check_box :version_check_enabled

  %fieldset
    %legend Account and Limit Settings
    = f.form_group :gravatar_enabled do
      = f.check_box :gravatar_enabled
    = f.form_group :twitter_sharing_enabled, help: 'Show users a button to share their newly created public or internal projects on twitter' do
      = f.check_box :twitter_sharing_enabled, label: 'Twitter enabled'
    = f.number_field :default_projects_limit
    = f.number_field :max_attachment_size, label: 'Maximum attachment size (MB)'
    = f.number_field :session_expire_delay, label: 'Session duration (minutes)', help: 'GitLab restart is required to apply changes'
    = f.form_group :user_oauth_applications, help: 'Allow users to register any application to use GitLab as an OAuth provider' do
      = f.check_box :user_oauth_applications, label: 'User OAuth applications'

  %fieldset
    %legend Sign-in Restrictions
    = f.form_group :signup_enabled do
      = f.check_box :signup_enabled, label: 'Sign-up enabled'
    = f.form_group :signin_enabled do
      = f.check_box :signin_enabled, label: 'Sign-in enabled'
    = f.text_area :restricted_signup_domains_raw, placeholder: 'domain.com',
    label: 'Restricted domains for sign-ups',
    help: 'Only users with e-mail addresses that match these domain(s) will be able to sign-up. Wildcards allowed. Use separate lines for multiple entries. Ex: domain.com, *.domain.com'
    = f.text_field :home_page_url, placeholder: 'http://company.example.com', help: 'We will redirect non-logged in users to this page'
    = f.text_field :after_sign_out_path, placeholder: 'http://company.example.com', help: 'We will redirect users to this page after they sign out'
    = f.text_area :sign_in_text, rows: 4, help: 'Markdown enabled'

  .form-actions
    = f.primary 'Save'
