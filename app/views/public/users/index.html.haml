%h3.page-title
  Users (#{@users.total_count})
%hr
.clearfix
  .pull-left
    = form_tag public_users_path, method: :get, class: 'form-inline' do |f|
      .form-group
        = search_field_tag :search, params[:search], placeholder: "Filter by username or name", class: "form-control search-text-input input-mn-300", id: "users_search"
      .form-group
        = submit_tag 'Search', class: "btn btn-primary wide"
  .pull-right
    .dropdown.inline
      %a.dropdown-toggle.btn{href: '#', "data-toggle" => "dropdown"}
        %span.light sort:
        - if @sort.present?
          = @sort.humanize
        - else
          Name
        %b.caret
      %ul.dropdown-menu
        %li
          = link_to public_users_path(sort: nil) do
            Name
          = link_to public_users_path(sort: 'username') do
            Username
%hr
.public-users
  - if @users.present?
    %table
      %tr
        %th
        %th
        %th
          Name
        %th
          Username
      - @users.each do |user|
        %tr
          %td
            = link_to user_path(user) do
              = image_tag avatar_icon(user.email, 26), alt: ''
          %td
            = visibility_level_icon(user.visibility_level)
          %td
            = link_to user_path(user) do
              = user.name
          %td
            = link_to user_path(user) do
              = user.username
  - else
    %h3.nothing_here_message No visible users
  = paginate @users, theme: "gitlab"
